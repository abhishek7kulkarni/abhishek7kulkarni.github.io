<!DOCTYPE html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Conway's Game of Life">
<script class="GameofLife" src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<meta charset=utf-8 />
<title>Conway's Game of Life</title>
<style>
  article, aside, figure, footer, header, hgroup, 
  menu, nav, section { display: block; }
  
  ul{list-style:none;}
  a{text-decoration:none;}

  
  #grid{
    width:800px;
    height:800px;
    background:#eee;
    padding:10px;
    border-radius:10px;
  }
  
  .box{
    font-size:10px;
    text-align:center;
    float:left;
    width:18px;
    height:18px;
    background:#fff;
    border:1px solid #aaa;
  }
  .box:hover{
    background:#ddd;
  }
  
  .center {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 50px;
  }
  
  .ui-btn {
	background:#92C8FF;
	width: 100px;
	height: 30px;
	margin:20px;
  }
  
  .slider {
	width: 300px;
  }
}
</style>
</head>
<body onload="init()" style="font-family:Arial, Helvetica, sans-serif;">

<div style="width:800px; margin:0 auto;">
<h1>Conway's Game of Life</h1>
<br><br>
Conway's Game of Life is a cellular automaton (0 player game) devised by the British mathematician John Horton Conway in 1970. This implementation is a tribute to him and all other victims of this deadly virus, since he passed away by Covid19 in April 2020. RIP John.
<br><br>
Let us denote the nodes as Coronavirus cases, with an objective of suppressing the number of Covid19 cases. After each iteration, some nodes die (black cells) and some take birth (white cells) based on the following rules:
<ul  style="list-style-type:disc;">
<li>Any live cell with fewer than two live neighbours dies, as if by underpopulation.
<li>Any live cell with two or three live neighbours lives on to the next generation.
<li>Any live cell with more than three live neighbours dies, as if by overpopulation.
<li>Any dead cell with exactly three live neighbours becomes a live cell, as if by reproduction.
</ul>
<br><br>




<div class="center">
<button id = "start" onclick="start()" class="ui-btn">START</button>

<button id = "stop" onclick="stop()" class="ui-btn">STOP</button>
SPEED
<input type="range" min="10" max="1000" value="50" class="slider" id="myRange" style="margin: 10px;" label="SPEED">

</div>

</div>

<div id="grid" style="width:800px; margin:0 auto;"></div>

<div style="width:800px; margin:0 auto;">
<h3>Some useful links:</h3>
<ul  style="list-style-type:disc;">
<li><a href="https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life">Wikipedia: Conwayâ€™s Game of Life</a><br>
<li><a href="https://dailyvoice.com/new-jersey/mercer/obituaries/covid-19-kills-renowned-princeton-mathematician-game-of-life-inventor-john-conway-in-3-days/786461/">John Conway</a>
</ul>
</div>

<script>
console.log("Welcome to Console...");

var timeOut;
var speed = 50;

var GRID_SIZE = 1600;
var X = 40;
var Y = 40;

var x = new Array(X);
for (var i = 0; i < x.length; i++) {
	x[i] = new Array(X);
}

var box = '<div class="box" />';

for(var i = 0; i<GRID_SIZE;i++){
	$('#grid').append(box);
}

var rangeInput = document.getElementById("myRange");
rangeInput.addEventListener('mouseup', function() {
	speed = this.value;
});


function init() {
	for (var i = 0; i < X; i++)
	{
		for (var j = 0; j < Y; j++)
		{
			x[i][j] = Math.round(Math.random());
		}
	}
	
	document.getElementById("stop").disabled = true;
	
	updateUI();
}

function updateUI() {
	for (var i = 0; i < X; i++)
	{
		for (var j = 0; j < Y; j++)
		{
			var myvar = (i*X)+j;
			if (x[i][j] == 1)
			{
				document.getElementsByClassName("box")[myvar].style.background = "grey";
			}	
			else
			{
				document.getElementsByClassName("box")[myvar].style.background = "white";
			}
		}
	}
}

function start() {
	
	document.getElementById("start").disabled = true;
	document.getElementById("stop").disabled = false;
	
	y = JSON.parse(JSON.stringify(x));
	
	for (var i = 0; i < X; i++)
	{
		for (var j = 0; j < Y; j++)
		{
			if (x[i-1] === undefined)
				x[i-1] = 0;
			if (x[i+1] === undefined)
				x[i+1] = 0;
			
			var nei_sum = 	x[i-1][j] +
							x[i][j-1] +
							x[i+1][j] +
							x[i][j+1] +
							
							x[i-1][j-1] +
							x[i-1][j+1] +
							x[i+1][j-1] +
							x[i+1][j+1];
							
			if (x[i][j] == 1)
			{
				if(nei_sum == 2 || nei_sum == 3)
				{
					y[i][j] = 1;
				}
				else
				{
					y[i][j] = 0;
				}
			}
			else if (x[i][j] == 0 && nei_sum == 3)
			{
				y[i][j] = 1;
			}
			else
				y[i][j] = x[i][j];
		}
	}

	//console.log(JSON.stringify(x) === JSON.stringify(y));
	
	x = JSON.parse(JSON.stringify(y));
	
	updateUI();
	
	timeOut = setTimeout(start, speed);
}

function stop() {
	document.getElementById("start").disabled = false;
	document.getElementById("stop").disabled = true;
	clearTimeout(timeOut);
}
</script>  
</body>
</html>
